<div>
    <h3>Comments</h3>

    {% if comments %}

        {% for comment in comments %}
            <div class="post">
                <a href="{{ url_for('user.profile', username=comment.author.username) }}">
                    {{ comment.author.username }}
                </a>
                <p class="time">{{ comment.timestamp }}</p>
                <p>{{ comment.body }}</p>

                {% if current_user.is_admin 
                    or current_user.can(Permission.MODERATE)
                    or current_user == comment.author %}
                    <form action="{{ url_for('main.delete_comment', comment_id=comment.id, post_id=comment.post.id) }}" method="POST">
                        <input type="submit" value="delete" >
                    </form>
                {% endif %}

            </div>
        {% endfor %}
            
        <div>{{ macro.pagination(pagination, endpoint, id=post.id) }}</div>
    {% else %}
        <p>no comments.</p>
    {% endif %}
</div>